<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê³ ë“±í•™êµ ì˜ì–´ ë¬¸ë²• ì¢…í•© ì—°ìŠµê¸° FINAL (Complete)</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 1000px; margin: 20px auto; line-height: 1.6; padding: 0 20px; color: #333; }
    h1, h2, h3 { margin: 0.5rem 0; }
    
    /* ë²„íŠ¼ ë””ìì¸ */
    .topic-buttons { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
    .topic-buttons button {
      padding: 10px 15px; cursor: pointer; border: 1px solid #ccc; background-color: #f8f9fa; border-radius: 6px;
      font-size: 0.95rem; transition: all 0.2s;
    }
    .topic-buttons button:hover { background-color: #e2e6ea; border-color: #adb5bd; }
    .topic-buttons button.active { background-color: #007bff; color: white; border-color: #0056b3; }

    /* ì„¹ì…˜ ë°•ìŠ¤ ë””ìì¸ */
    .topic-section {
      display: none; border: 1px solid #e0e0e0; padding: 20px; border-radius: 10px;
      background: #ffffff; margin-bottom: 25px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }

    /* í…Œì´ë¸” ë””ìì¸ */
    table { border-collapse: collapse; width: 100%; margin-top: 15px; }
    th, td { border: 1px solid #dee2e6; padding: 10px; text-align: center; }
    th { background: #e9ecef; }

    /* ë…¸íŠ¸ ì˜ì—­ ë””ìì¸ */
    .note-area { margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee; }
    .note-display { background-color: #fff3cd; padding: 10px; border-radius: 5px; border: 1px solid #ffeeba; margin-top: 10px; display: none; white-space: pre-wrap; }
    textarea { width: 100%; height: 80px; padding: 10px; border-radius: 5px; border: 1px solid #ced4da; margin-top: 10px; box-sizing: border-box; font-family: inherit; }
    
    .small-note { font-size: 0.95rem; color: #555; margin-bottom: 10px; display: block; }

    /* í€´ì¦ˆ ë°•ìŠ¤ ë””ìì¸ */
    .quiz-box {
      border: 1px solid #ced4da; padding: 20px; border-radius: 10px;
      background: #fdfdfd; margin-top: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }
    .options { margin-top: 15px; }
    .options button { 
      margin: 5px 5px 0 0; padding: 10px 20px; cursor: pointer; background: #fff; 
      border: 2px solid #e9ecef; border-radius: 6px; font-size: 1rem; transition: all 0.2s;
    }
    .options button:hover { background: #f1f3f5; border-color: #adb5bd; }
    .options button:disabled { cursor: default; opacity: 0.7; }
    
    .result { margin-top: 15px; font-weight: bold; font-size: 1.1rem; }
    .control-btn { background-color: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1rem; }
    .control-btn:hover { background-color: #218838; }
    .reset-btn { background-color: #dc3545; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1rem; margin-left: 10px; }
    .reset-btn:hover { background-color: #c82333; }
  </style>
</head>
<body>

<h1>ê³ ë“±í•™êµ ì˜ì–´ ë¬¸ë²• ì¢…í•© ì—°ìŠµê¸°</h1>
<p class="small-note">ìƒë‹¨ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë¬¸ë²• ì„¤ëª…ì„ í™•ì¸í•˜ê³  ë‚˜ë§Œì˜ ë…¸íŠ¸ë¥¼ ì¶”ê°€í•˜ì„¸ìš”. ì•„ë˜ì—ì„œ í€´ì¦ˆë¥¼ í’€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h2>â‘  ë¬¸ë²• ìš”ì•½ (Grammar Summary) & ë‚˜ë§Œì˜ ë…¸íŠ¸</h2>

<div class="topic-buttons">
  <button onclick="showTopic('verbs')">ë¶ˆê·œì¹™ ë™ì‚¬ <span id="count-verbs"></span></button>
  <button onclick="showTopic('presentPerfect')">í˜„ì¬ì™„ë£Œ <span id="count-presentPerfect"></span></button>
  <button onclick="showTopic('modal')">ì¡°ë™ì‚¬ <span id="count-modal"></span></button>
  <button onclick="showTopic('relative')">ê´€ê³„ëŒ€ëª…ì‚¬ <span id="count-relative"></span></button>
  <button onclick="showTopic('relativeAdverb')">ê´€ê³„ë¶€ì‚¬ <span id="count-relativeAdverb"></span></button>
  <button onclick="showTopic('comparison')">ë¹„êµê¸‰/ìµœìƒê¸‰ <span id="count-comparison"></span></button>
  <button onclick="showTopic('preposition')">ì „ì¹˜ì‚¬ <span id="count-preposition"></span></button>
  <button onclick="showTopic('conjunction')">ì ‘ì†ì‚¬ <span id="count-conjunction"></span></button>
  <button onclick="showTopic('conditionalPresent')">ê°€ì •ë²• í˜„ì¬ <span id="count-conditionalPresent"></span></button>
  <button onclick="showTopic('conditionalPast')">ê°€ì •ë²• ê³¼ê±° <span id="count-conditionalPast"></span></button>
  <button onclick="showTopic('conditionalPastPerfect')">ê°€ì •ë²• ê³¼ê±°ì™„ë£Œ <span id="count-conditionalPastPerfect"></span></button>
  <button onclick="showTopic('passive')">ìˆ˜ë™íƒœ <span id="count-passive"></span></button>
  <button onclick="showTopic('causative')">ì‚¬ì—­ë™ì‚¬ <span id="count-causative"></span></button>
  <button onclick="showTopic('perception')">ì§€ê°ë™ì‚¬ <span id="count-perception"></span></button>
  <button onclick="showTopic('participle')">ë¶„ì‚¬êµ¬ë¬¸ <span id="count-participle"></span></button>
  <button onclick="showTopic('pronoun')">ì¸ì¹­ëŒ€ëª…ì‚¬ <span id="count-pronoun"></span></button>
  <button onclick="showTopic('toinf')">toë¶€ì •ì‚¬ <span id="count-toinf"></span></button>
  <button onclick="showTopic('gerund')">ë™ëª…ì‚¬ ì£¼ì–´ <span id="count-gerund"></span></button>
</div>

<div id="topic-verbs" class="topic-section">
  <h3>1) ë¶ˆê·œì¹™ ë™ì‚¬ (Irregular Verbs)</h3>
  <p class="small-note">ë™ì‚¬ì›í˜• - ê³¼ê±°í˜• - ê³¼ê±°ë¶„ì‚¬ (ì•”ê¸° í•„ìˆ˜!)</p>
  <table>
    <thead><tr><th>í˜„ì¬í˜•</th><th>ê³¼ê±°í˜•</th><th>ê³¼ê±°ë¶„ì‚¬</th><th>ëœ»</th></tr></thead>
    <tbody id="verbTableBody"></tbody>
  </table>
  <div class="quiz-box" style="background:#f9f9f9; border:1px dashed #ccc;">
    <h4>[ë¯¸ë‹ˆ í€´ì¦ˆ] ë¶ˆê·œì¹™ ë™ì‚¬</h4>
    <select id="verbQuizType" style="padding:5px;">
      <option value="past">í˜„ì¬í˜• â†’ ê³¼ê±°í˜•</option>
      <option value="pp">í˜„ì¬í˜• â†’ ê³¼ê±°ë¶„ì‚¬</option>
      <option value="baseFromKo">í•œêµ­ì–´ â†’ í˜„ì¬í˜•</option>
    </select>
    <button onclick="startVerbQuiz()" style="padding:5px 10px;">ë¬¸ì œ í’€ê¸°</button>
    <div id="verbQuizArea" style="display:none; margin-top:10px;">
      <p id="verbQuizQuestion" style="font-weight:bold;"></p>
      <input type="text" id="verbQuizAnswer" placeholder="ì •ë‹µ ì…ë ¥" style="width:60%; display:inline-block; height:30px; margin:0;" />
      <button onclick="checkVerbQuiz()" style="padding:5px 10px;">í™•ì¸</button>
      <div id="verbQuizResult" class="result"></div>
    </div>
  </div>
</div>

<div id="topic-presentPerfect" class="topic-section">
  <h3>2) í˜„ì¬ì™„ë£Œ (Present Perfect)</h3>
  <ul class="small-note">
    <li>í˜•íƒœ: <b style="color:blue">have/has + p.p.</b></li>
    <li>ì˜ë¯¸: ê³¼ê±°ì˜ ì¼ì´ í˜„ì¬ê¹Œì§€ ì˜í–¥ì„ ë¯¸ì¹¨ (ì™„ë£Œ, ê²½í—˜, ê³„ì†, ê²°ê³¼)</li>
    <li><b style="color:red">ì£¼ì˜:</b> yesterday, last year ë“± ëª…ë°±í•œ ê³¼ê±° ì‹œì  ë¶€ì‚¬ì™€ëŠ” í•¨ê»˜ ì“¸ ìˆ˜ ì—†ìŒ.</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('presentPerfect')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-presentPerfect" style="display:none;">
      <textarea id="note-input-presentPerfect" placeholder="ì—¬ê¸°ì— ìì‹ ë§Œì˜ ì•”ê¸° íŒì´ë‚˜ ì„¤ëª…ì„ ì ì–´ë³´ì„¸ìš”."></textarea>
      <button onclick="saveNote('presentPerfect')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-presentPerfect" class="note-display"></div>
  </div>
</div>

<div id="topic-modal" class="topic-section">
  <h3>3) ì¡°ë™ì‚¬ (Modals)</h3>
  <ul class="small-note">
    <li><b>Must:</b> ê°•í•œ ì˜ë¬´ / ê°•í•œ ì¶”ì¸¡ (~ì„ì— í‹€ë¦¼ì—†ë‹¤)</li>
    <li><b>Should:</b> ì˜ë¬´ / ì¶©ê³  (~í•˜ëŠ” ê²Œ ì¢‹ê² ë‹¤)</li>
    <li><b>Must have p.p.:</b> ~í–ˆìŒì— í‹€ë¦¼ì—†ë‹¤ (ê³¼ê±° í™•ì‹ )</li>
    <li><b>Should have p.p.:</b> ~í–ˆì–´ì•¼ í–ˆëŠ”ë° (ê³¼ê±° í›„íšŒ)</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('modal')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-modal" style="display:none;">
      <textarea id="note-input-modal" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('modal')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-modal" class="note-display"></div>
  </div>
</div>

<div id="topic-relative" class="topic-section">
  <h3>4) ê´€ê³„ëŒ€ëª…ì‚¬</h3>
  <ul class="small-note">
    <li><b>Who/Which/That:</b> ì„ í–‰ì‚¬ë¥¼ ìˆ˜ì‹í•˜ëŠ” í˜•ìš©ì‚¬ì ˆì„ ì´ëˆë‹¤.</li>
    <li><b>What:</b> ì„ í–‰ì‚¬ë¥¼ í¬í•¨í•˜ë©° "~í•˜ëŠ” ê²ƒ"ìœ¼ë¡œ í•´ì„ (ëª…ì‚¬ì ˆ).</li>
    <li><b style="color:red">ê³„ì†ì  ìš©ë²•(,):</b> ì½¤ë§ˆ ë’¤ì—ëŠ” <b>that</b>ì„ ì“¸ ìˆ˜ ì—†ë‹¤.</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('relative')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-relative" style="display:none;">
      <textarea id="note-input-relative" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('relative')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-relative" class="note-display"></div>
  </div>
</div>

<div id="topic-relativeAdverb" class="topic-section">
  <h3>ê´€ê³„ë¶€ì‚¬</h3>
  <ul class="small-note">
    <li><b>When, Where, Why, How:</b> ì „ì¹˜ì‚¬+ê´€ê³„ëŒ€ëª…ì‚¬ ì—­í• .</li>
    <li>íŠ¹ì§•: ë’¤ì— <b>ì™„ì „í•œ ë¬¸ì¥</b>ì´ ì˜¨ë‹¤.</li>
    <li><b style="color:red">ì£¼ì˜:</b> <b>the way</b>ì™€ <b>how</b>ëŠ” ì ˆëŒ€ í•¨ê»˜ ì“°ì§€ ì•ŠëŠ”ë‹¤.</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('relativeAdverb')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-relativeAdverb" style="display:none;">
      <textarea id="note-input-relativeAdverb" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('relativeAdverb')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-relativeAdverb" class="note-display"></div>
  </div>
</div>

<div id="topic-comparison" class="topic-section">
  <h3>ë¹„êµê¸‰ & ìµœìƒê¸‰</h3>
  <ul class="small-note">
    <li><b>ë¹„êµê¸‰ ê°•ì¡°:</b> much, even, still, far, a lot (í›¨ì”¬). <b style="color:red">VeryëŠ” ì•ˆë¨!</b></li>
    <li><b>The ë¹„êµê¸‰, the ë¹„êµê¸‰:</b> ~í•˜ë©´ í• ìˆ˜ë¡ ë” ~í•˜ë‹¤.</li>
    <li><b>One of the ìµœìƒê¸‰ + ë³µìˆ˜ëª…ì‚¬:</b> ê°€ì¥ ~í•œ ê²ƒë“¤ ì¤‘ í•˜ë‚˜.</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('comparison')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-comparison" style="display:none;">
      <textarea id="note-input-comparison" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('comparison')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-comparison" class="note-display"></div>
  </div>
</div>

<div id="topic-preposition" class="topic-section">
  <h3>ì „ì¹˜ì‚¬ (Prepositions)</h3>
  <ul class="small-note">
    <li><b>ì‹œê°„:</b> at(ì‹œê°), on(ë‚ ì§œ/ìš”ì¼), in(ì›”/ë…„/ê³„ì ˆ)</li>
    <li><b>ê¸°ê°„:</b> for(+ìˆ«ì), during(+ëª…ì‚¬)</li>
    <li><b>ì¥ì†Œ:</b> at(ì§€ì ), on(í‘œë©´), in(ê³µê°„)</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('preposition')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-preposition" style="display:none;">
      <textarea id="note-input-preposition" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('preposition')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-preposition" class="note-display"></div>
  </div>
</div>

<div id="topic-conjunction" class="topic-section">
  <h3>ì ‘ì†ì‚¬</h3>
  <ul class="small-note">
    <li><b>Because vs Because of:</b> Because+ì ˆ(S+V), Because of+ëª…ì‚¬êµ¬</li>
    <li><b>ëª…ë ¹ë¬¸, and / or:</b> and(ê·¸ëŸ¬ë©´), or(ê·¸ë ‡ì§€ ì•Šìœ¼ë©´)</li>
    <li><b>Although / Though:</b> ë¹„ë¡ ~ì¼ì§€ë¼ë„ (ë’¤ì— ë¬¸ì¥)</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('conjunction')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-conjunction" style="display:none;">
      <textarea id="note-input-conjunction" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('conjunction')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-conjunction" class="note-display"></div>
  </div>
</div>

<div id="topic-conditionalPresent" class="topic-section">
  <h3>5-1) ê°€ì •ë²• í˜„ì¬ / ì¡°ê±´ë¬¸</h3>
  <p class="small-note"><b>If + ì£¼ì–´ + í˜„ì¬í˜•, ì£¼ì–´ + will/can + ë™ì‚¬ì›í˜•</b></p>
  <ul class="small-note">
    <li>ë¯¸ë˜ì˜ ê°€ëŠ¥ì„±ì´ë‚˜ ë¶ˆë³€ì˜ ì§„ë¦¬ë¥¼ ë‚˜íƒ€ëƒ„.</li>
    <li><b style="color:red">ì‹œê°„/ì¡°ê±´ ë¶€ì‚¬ì ˆì—ì„œëŠ” í˜„ì¬ì‹œì œê°€ ë¯¸ë˜ë¥¼ ëŒ€ì‹ í•œë‹¤.</b></li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('conditionalPresent')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-conditionalPresent" style="display:none;">
      <textarea id="note-input-conditionalPresent" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('conditionalPresent')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-conditionalPresent" class="note-display"></div>
  </div>
</div>

<div id="topic-conditionalPast" class="topic-section">
  <h3>5-2) ê°€ì •ë²• ê³¼ê±° (í˜„ì¬ ì‚¬ì‹¤ ë°˜ëŒ€)</h3>
  <p class="small-note" style="background:#eef; padding:5px;"><b>If + S + ê³¼ê±°ë™ì‚¬(be->were), S + ì¡°ë™ì‚¬ê³¼ê±° + R</b></p>
  <ul class="small-note">
    <li>í•´ì„: (ì§€ê¸ˆ) ~ë¼ë©´, ~í•  í…ë°.</li>
    <li><b>I wish + ê°€ì •ë²• ê³¼ê±°:</b> (ì§€ê¸ˆ) ~ë¼ë©´ ì¢‹ì„ í…ë°.</li>
    <li><b>as if + ê°€ì •ë²• ê³¼ê±°:</b> ë§ˆì¹˜ ~ì¸ ê²ƒì²˜ëŸ¼.</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('conditionalPast')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-conditionalPast" style="display:none;">
      <textarea id="note-input-conditionalPast" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('conditionalPast')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-conditionalPast" class="note-display"></div>
  </div>
</div>

<div id="topic-conditionalPastPerfect" class="topic-section">
  <h3>5-3) ê°€ì •ë²• ê³¼ê±°ì™„ë£Œ (ê³¼ê±° ì‚¬ì‹¤ ë°˜ëŒ€)</h3>
  <p class="small-note" style="background:#fee; padding:5px;"><b>If + S + had p.p., S + ì¡°ë™ì‚¬ê³¼ê±° + have p.p.</b></p>
  <ul class="small-note">
    <li>í•´ì„: (ê³¼ê±°ì—) ~í–ˆë”ë¼ë©´, ~í–ˆì„ í…ë°.</li>
    <li><b>í˜¼í•© ê°€ì •ë²•:</b> If + had p.p. (ê³¼ê±°ì— ~í–ˆë”ë¼ë©´), S + ì¡°ë™ì‚¬ê³¼ê±° + R (ì§€ê¸ˆ ~í•  í…ë°).</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('conditionalPastPerfect')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-conditionalPastPerfect" style="display:none;">
      <textarea id="note-input-conditionalPastPerfect" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('conditionalPastPerfect')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-conditionalPastPerfect" class="note-display"></div>
  </div>
</div>

<div id="topic-passive" class="topic-section">
  <h3>ìˆ˜ë™íƒœ (Passive Voice)</h3>
  <ul class="small-note">
    <li>ê¸°ë³¸: <b>be + p.p.</b> (by í–‰ìœ„ì)</li>
    <li>ì§„í–‰í˜•: be being p.p. / ì™„ë£Œí˜•: have been p.p.</li>
    <li>ì¡°ë™ì‚¬: will/can be p.p.</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('passive')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-passive" style="display:none;">
      <textarea id="note-input-passive" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('passive')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-passive" class="note-display"></div>
  </div>
</div>

<div id="topic-causative" class="topic-section">
  <h3>6) ì‚¬ì—­ë™ì‚¬ (ì‹œí‚¤ë‹¤)</h3>
  <ul class="small-note">
    <li><b>Make, Have, Let:</b> ëª©ì ì–´ + <b style="color:red">ë™ì‚¬ì›í˜•</b></li>
    <li><b>Get:</b> ëª©ì ì–´ + <b style="color:blue">toë¶€ì •ì‚¬</b></li>
    <li><b>Help:</b> ëª©ì ì–´ + ë™ì‚¬ì›í˜•/toë¶€ì •ì‚¬ ë‘˜ ë‹¤ ê°€ëŠ¥</li>
    <li>* ëª©ì ì–´ê°€ ë‹¹í•˜ëŠ” ê´€ê³„ë©´ <b>p.p.</b>ë¥¼ ì”€.</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('causative')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-causative" style="display:none;">
      <textarea id="note-input-causative" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('causative')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-causative" class="note-display"></div>
  </div>
</div>

<div id="topic-perception" class="topic-section">
  <h3>7) ì§€ê°ë™ì‚¬ (ë³´ë‹¤/ë“£ë‹¤)</h3>
  <ul class="small-note">
    <li>See, Watch, Hear, Feel ë“±</li>
    <li>ëª©ì ë³´ì–´: <b>ë™ì‚¬ì›í˜•</b> (ì „ì²´ ë™ì‘) ë˜ëŠ” <b>-ing</b> (ì§„í–‰ ì¤‘)</li>
    <li><b style="color:red">ì ˆëŒ€ ë¶ˆê°€:</b> toë¶€ì •ì‚¬</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('perception')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-perception" style="display:none;">
      <textarea id="note-input-perception" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('perception')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-perception" class="note-display"></div>
  </div>
</div>

<div id="topic-participle" class="topic-section">
  <h3>8) ë¶„ì‚¬êµ¬ë¬¸</h3>
  <ul class="small-note">
    <li>ì ‘ì†ì‚¬ì™€ ì£¼ì–´ë¥¼ ìƒëµí•˜ê³  ë™ì‚¬ë¥¼ ë³€í˜•.</li>
    <li>ëŠ¥ë™: <b>-ing</b> / ìˆ˜ë™: <b>(Being) p.p.</b></li>
    <li>ì‹œì œ ì•ì„¬: <b>Having p.p.</b></li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('participle')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-participle" style="display:none;">
      <textarea id="note-input-participle" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('participle')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-participle" class="note-display"></div>
  </div>
</div>

<div id="topic-pronoun" class="topic-section">
  <h3>9) ì¸ì¹­ëŒ€ëª…ì‚¬</h3>
  <ul class="small-note">
    <li>ì¬ê·€ëŒ€ëª…ì‚¬(-self): ì£¼ì–´ì™€ ëª©ì ì–´ê°€ ê°™ì„ ë•Œ ì‚¬ìš©.</li>
    <li>ì†Œìœ ëŒ€ëª…ì‚¬: ~ì˜ ê²ƒ (mine, yours, hers...)</li>
    <li>It: ê°€ì£¼ì–´, ë¹„ì¸ì¹­ ì£¼ì–´ ë“± ë‹¤ì–‘í•˜ê²Œ ì“°ì„.</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('pronoun')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-pronoun" style="display:none;">
      <textarea id="note-input-pronoun" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('pronoun')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-pronoun" class="note-display"></div>
  </div>
</div>

<div id="topic-toinf" class="topic-section">
  <h3>10) toë¶€ì •ì‚¬</h3>
  <ul class="small-note">
    <li>ëª…ì‚¬ì : ~í•˜ëŠ” ê²ƒ (ì£¼ì–´, ëª©ì ì–´, ë³´ì–´)</li>
    <li>í˜•ìš©ì‚¬ì : ~í•  (ëª…ì‚¬ ìˆ˜ì‹)</li>
    <li>ë¶€ì‚¬ì : ~í•˜ê¸° ìœ„í•´, ~í•´ì„œ</li>
    <li><b>ì£¼ìš” êµ¬ë¬¸:</b> too ~ to (ë„ˆë¬´ ~í•´ì„œ ëª»í•˜ë‹¤), enough to (~í•  ë§Œí¼ ì¶©ë¶„íˆ)</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('toinf')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-toinf" style="display:none;">
      <textarea id="note-input-toinf" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('toinf')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-toinf" class="note-display"></div>
  </div>
</div>

<div id="topic-gerund" class="topic-section">
  <h3>11) ë™ëª…ì‚¬</h3>
  <ul class="small-note">
    <li>ë™ì‚¬ì›í˜•+ing: ~í•˜ëŠ” ê²ƒ (ëª…ì‚¬ ì—­í• )</li>
    <li>ì£¼ì–´ë¡œ ì“°ì´ë©´ <b>ë‹¨ìˆ˜ ì·¨ê¸‰</b>.</li>
    <li><b>ë™ëª…ì‚¬ë§Œ ëª©ì ì–´ë¡œ ì·¨í•˜ëŠ” ë™ì‚¬:</b> enjoy, finish, mind, give up, avoid, keep ë“±.</li>
  </ul>
  <div class="note-area">
    <button onclick="toggleNote('gerund')">ğŸ“ ë‚˜ë§Œì˜ ì„¤ëª… ì¶”ê°€/ìˆ˜ì •</button>
    <div id="note-edit-gerund" style="display:none;">
      <textarea id="note-input-gerund" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
      <button onclick="saveNote('gerund')" style="margin-top:5px;">ì €ì¥í•˜ê¸°</button>
    </div>
    <div id="note-display-gerund" class="note-display"></div>
  </div>
</div>

<hr>

<h2>â‘¡ í€´ì¦ˆ (Practice)</h2>

<div class="quiz-box">
  <h3>A. ë¬¸ë²• ê°ê´€ì‹ í€´ì¦ˆ</h3>
  <div style="margin-bottom:10px;">
    <label for="grammarTopic">ì£¼ì œ ì„ íƒ: </label>
    <select id="grammarTopic" onchange="resetQuizState()">
      <option value="all">ì „ì²´ ë¬´ì‘ìœ„</option>
      <option value="presentPerfect">í˜„ì¬ì™„ë£Œ</option>
      <option value="modal">ì¡°ë™ì‚¬</option>
      <option value="relative">ê´€ê³„ëŒ€ëª…ì‚¬</option>
      <option value="relativeAdverb">ê´€ê³„ë¶€ì‚¬</option>
      <option value="comparison">ë¹„êµê¸‰/ìµœìƒê¸‰</option>
      <option value="preposition">ì „ì¹˜ì‚¬</option>
      <option value="conjunction">ì ‘ì†ì‚¬</option>
      <option value="conditionalPresent">ê°€ì •ë²• í˜„ì¬</option>
      <option value="conditionalPast">ê°€ì •ë²• ê³¼ê±°</option>
      <option value="conditionalPastPerfect">ê°€ì •ë²• ê³¼ê±°ì™„ë£Œ</option>
      <option value="passive">ìˆ˜ë™íƒœ</option>
      <option value="causative">ì‚¬ì—­ë™ì‚¬</option>
      <option value="perception">ì§€ê°ë™ì‚¬</option>
      <option value="participle">ë¶„ì‚¬êµ¬ë¬¸</option>
      <option value="pronoun">ì¸ì¹­ëŒ€ëª…ì‚¬</option>
      <option value="toinf">toë¶€ì •ì‚¬</option>
      <option value="gerund">ë™ëª…ì‚¬</option>
    </select>
  </div>
  
  <button onclick="nextQuestion()" class="control-btn" id="nextBtn">ìƒˆ ë¬¸ì œ / ë‹¤ìŒ ë¬¸ì œ</button>
  <button onclick="resetQuizPool()" class="reset-btn">ë¬¸ì œ ëª©ë¡ ì´ˆê¸°í™”</button>

  <div id="grammarQuizArea" style="display:none; margin-top:20px;">
    <p id="quizProgress" style="font-size:0.9rem; color:#666; margin-bottom:5px;"></p>
    <p id="grammarQuestionEn" style="font-weight:bold; font-size:1.15em; color:#222;"></p>
    <p id="grammarQuestionKo" class="small-note" style="color:#555;"></p>
    <div id="grammarOptions" class="options"></div>
    <div id="grammarQuizResult" class="result"></div>
    <p id="grammarExplanation" class="small-note" style="margin-top:10px; font-weight:500; color:#0056b3;"></p>
  </div>
</div>

<div class="quiz-box">
  <h3>ì˜¤ë‹µ ë…¸íŠ¸ & ë‹¤ì‹œ í’€ê¸°</h3>
  <p id="wrongList" class="small-note">ì•„ì§ í‹€ë¦° ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
  <button onclick="retryWrongQuestion()" class="control-btn" style="background-color:#ffc107; color:#000;">í‹€ë¦° ë¬¸ì œ ë‹¤ì‹œ í’€ê¸°</button>

  <div id="wrongQuizArea" style="display:none; margin-top:20px; background:#fff8e1; padding:15px; border-radius:8px;">
    <p id="wrongQuestionInfo" style="font-size:0.85rem; color:#777;"></p>
    <p id="wrongQuestionEn" style="font-weight:bold; font-size:1.1em;"></p>
    <p id="wrongQuestionKo" class="small-note"></p>
    <div id="wrongOptions" class="options"></div>
    <div id="wrongResult" class="result"></div>
    <p id="wrongExplanation" class="small-note" style="color:#d9534f;"></p>
  </div>
</div>

<script>
/* ==========================================================================
   1. ë°ì´í„° ì˜ì—­ (ë¬¸ì œ & ë¶ˆê·œì¹™ ë™ì‚¬)
   ========================================================================== */
const verbs = [
  { base:"be", past:"was/were", pp:"been", ko:"ì´ë‹¤" },
  { base:"become", past:"became", pp:"become", ko:"ë˜ë‹¤" },
  { base:"begin", past:"began", pp:"begun", ko:"ì‹œì‘í•˜ë‹¤" },
  { base:"break", past:"broke", pp:"broken", ko:"ê¹¨ë‹¤" },
  { base:"bring", past:"brought", pp:"brought", ko:"ê°€ì ¸ì˜¤ë‹¤" },
  { base:"build", past:"built", pp:"built", ko:"ì§“ë‹¤" },
  { base:"buy", past:"bought", pp:"bought", ko:"ì‚¬ë‹¤" },
  { base:"catch", past:"caught", pp:"caught", ko:"ì¡ë‹¤" },
  { base:"choose", past:"chose", pp:"chosen", ko:"ê³ ë¥´ë‹¤" },
  { base:"come", past:"came", pp:"come", ko:"ì˜¤ë‹¤" },
  { base:"do", past:"did", pp:"done", ko:"í•˜ë‹¤" },
  { base:"drink", past:"drank", pp:"drunk", ko:"ë§ˆì‹œë‹¤" },
  { base:"drive", past:"drove", pp:"driven", ko:"ìš´ì „í•˜ë‹¤" },
  { base:"eat", past:"ate", pp:"eaten", ko:"ë¨¹ë‹¤" },
  { base:"fall", past:"fell", pp:"fallen", ko:"ë–¨ì–´ì§€ë‹¤" },
  { base:"feel", past:"felt", pp:"felt", ko:"ëŠë¼ë‹¤" },
  { base:"find", past:"found", pp:"found", ko:"ì°¾ë‹¤" },
  { base:"fly", past:"flew", pp:"flown", ko:"ë‚ ë‹¤" },
  { base:"forget", past:"forgot", pp:"forgotten", ko:"ìŠë‹¤" },
  { base:"get", past:"got", pp:"gotten", ko:"ì–»ë‹¤" },
  { base:"give", past:"gave", pp:"given", ko:"ì£¼ë‹¤" },
  { base:"go", past:"went", pp:"gone", ko:"ê°€ë‹¤" },
  { base:"grow", past:"grew", pp:"grown", ko:"ìë¼ë‹¤" },
  { base:"have", past:"had", pp:"had", ko:"ê°€ì§€ë‹¤" },
  { base:"hear", past:"heard", pp:"heard", ko:"ë“£ë‹¤" },
  { base:"keep", past:"kept", pp:"kept", ko:"ìœ ì§€í•˜ë‹¤" },
  { base:"know", past:"knew", pp:"known", ko:"ì•Œë‹¤" },
  { base:"leave", past:"left", pp:"left", ko:"ë– ë‚˜ë‹¤" },
  { base:"lose", past:"lost", pp:"lost", ko:"ìƒë‹¤" },
  { base:"make", past:"made", pp:"made", ko:"ë§Œë“¤ë‹¤" },
  { base:"meet", past:"met", pp:"met", ko:"ë§Œë‚˜ë‹¤" },
  { base:"pay", past:"paid", pp:"paid", ko:"ì§€ë¶ˆí•˜ë‹¤" },
  { base:"read", past:"read", pp:"read", ko:"ì½ë‹¤" },
  { base:"run", past:"ran", pp:"run", ko:"ë‹¬ë¦¬ë‹¤" },
  { base:"say", past:"said", pp:"said", ko:"ë§í•˜ë‹¤" },
  { base:"see", past:"saw", pp:"seen", ko:"ë³´ë‹¤" },
  { base:"send", past:"sent", pp:"sent", ko:"ë³´ë‚´ë‹¤" },
  { base:"sing", past:"sang", pp:"sung", ko:"ë…¸ë˜í•˜ë‹¤" },
  { base:"sit", past:"sat", pp:"sat", ko:"ì•‰ë‹¤" },
  { base:"sleep", past:"slept", pp:"slept", ko:"ìë‹¤" },
  { base:"speak", past:"spoke", pp:"spoken", ko:"ë§í•˜ë‹¤" },
  { base:"stand", past:"stood", pp:"stood", ko:"ì„œë‹¤" },
  { base:"swim", past:"swam", pp:"swum", ko:"ìˆ˜ì˜í•˜ë‹¤" },
  { base:"take", past:"took", pp:"taken", ko:"ê°€ì ¸ê°€ë‹¤" },
  { base:"teach", past:"taught", pp:"taught", ko:"ê°€ë¥´ì¹˜ë‹¤" },
  { base:"tell", past:"told", pp:"told", ko:"ë§í•˜ë‹¤" },
  { base:"think", past:"thought", pp:"thought", ko:"ìƒê°í•˜ë‹¤" },
  { base:"understand", past:"understood", pp:"understood", ko:"ì´í•´í•˜ë‹¤" },
  { base:"write", past:"wrote", pp:"written", ko:"ì“°ë‹¤" }
];

const grammarQuestions = [
  // --- í˜„ì¬ì™„ë£Œ (Present Perfect) ---
  { id:1, topic:"presentPerfect", en:"I ____ lost my key.", ko:"ë‚˜ëŠ” ì—´ì‡ ë¥¼ ìƒì–´ë²„ë ¸ë‹¤. (ê·¸ë˜ì„œ ì§€ê¸ˆ ì—†ìŒ)", options:["have","has","did","was"], answer:"have", explanation:"I have lost (ê²°ê³¼ ìš©ë²•)." },
  { id:2, topic:"presentPerfect", en:"She ____ visited Paris twice.", ko:"ê·¸ë…€ëŠ” íŒŒë¦¬ë¥¼ ë‘ ë²ˆ ë°©ë¬¸í–ˆë‹¤.", options:["has","have","is","did"], answer:"has", explanation:"She has visited (ê²½í—˜ ìš©ë²•)." },
  { id:3, topic:"presentPerfect", en:"We have ____ each other for 10 years.", ko:"ìš°ë¦¬ëŠ” 10ë…„ ë™ì•ˆ ì„œë¡œ ì•Œê³  ì§€ëƒˆë‹¤.", options:["know","knew","known","knowing"], answer:"known", explanation:"have + p.p. (know-knew-known)." },
  { id:4, topic:"presentPerfect", en:"He has ____ gone out.", ko:"ê·¸ëŠ” ë°©ê¸ˆ ë‚˜ê°”ë‹¤.", options:["just","ever","yet","since"], answer:"just", explanation:"ì™„ë£Œ ìš©ë²•ì— ì“°ì´ëŠ” just (ë°©ê¸ˆ)." },
  { id:5, topic:"presentPerfect", en:"Have you ____ eaten kimchi?", ko:"ê¹€ì¹˜ë¥¼ ë¨¹ì–´ë³¸ ì  ìˆë‹ˆ?", options:["ever","never","yet","ago"], answer:"ever", explanation:"ê²½í—˜ì„ ë¬¼ì„ ë•Œ ever ì‚¬ìš©." },
  { id:6, topic:"presentPerfect", en:"I haven't finished it ____.", ko:"ë‚˜ëŠ” ì•„ì§ ê·¸ê²ƒì„ ëë‚´ì§€ ëª»í–ˆë‹¤.", options:["just","already","yet","now"], answer:"yet", explanation:"ë¶€ì •ë¬¸ ëì—ëŠ” yet (ì•„ì§)." },
  { id:101, topic:"presentPerfect", en:"She has lived here ____ 2010.", ko:"ê·¸ë…€ëŠ” 2010ë…„ë¶€í„° ì—¬ê¸°ì„œ ì‚´ì•˜ë‹¤.", options:["since","for","from","during"], answer:"since", explanation:"ì‹œì‘ ì‹œì  ì•ì—ëŠ” since." },
  { id:102, topic:"presentPerfect", en:"I have stayed here ____ two weeks.", ko:"ë‚˜ëŠ” ì—¬ê¸°ì— 2ì£¼ ë™ì•ˆ ë¨¸ë¬¼ë €ë‹¤.", options:["for","since","during","while"], answer:"for", explanation:"ìˆ«ì ê¸°ê°„ ì•ì—ëŠ” for." },
  { id:103, topic:"presentPerfect", en:"Mike has ____ to New York.", ko:"ë§ˆì´í¬ëŠ” ë‰´ìš•ìœ¼ë¡œ ê°€ë²„ë ¸ë‹¤. (ì—¬ê¸° ì—†ìŒ)", options:["gone","been","went","go"], answer:"gone", explanation:"has gone to (ê²°ê³¼: ê°€ë²„ë¦¬ê³  ì—†ë‹¤)." },
  { id:104, topic:"presentPerfect", en:"I ____ seen him yesterday.", ko:"ë‚˜ëŠ” ì–´ì œ ê·¸ë¥¼ ë³´ì•˜ë‹¤. (ê³¼ê±°)", options:["have","has","saw","did"], answer:"saw", explanation:"yesterdayëŠ” ëª…ë°±í•œ ê³¼ê±°ì´ë¯€ë¡œ ê³¼ê±°ì‹œì œ saw ì‚¬ìš© (have seen ë¶ˆê°€)." },
  { id:105, topic:"presentPerfect", en:"They have already ____ lunch.", ko:"ê·¸ë“¤ì€ ì´ë¯¸ ì ì‹¬ì„ ë¨¹ì—ˆë‹¤.", options:["eat","ate","eaten","eating"], answer:"eaten", explanation:"have + p.p. (eat-ate-eaten)." },
  { id:106, topic:"presentPerfect", en:"My father has ____ his car.", ko:"ìš°ë¦¬ ì•„ë¹ ëŠ” ì°¨ë¥¼ ì„¸ì°¨í–ˆë‹¤.", options:["wash","washed","washing","washes"], answer:"washed", explanation:"ê·œì¹™ ë™ì‚¬ì˜ p.p.ëŠ” -ed." },

  // --- ì¡°ë™ì‚¬ (Modal) ---
  { id:7, topic:"modal", en:"You ____ go home now.", ko:"ë„ˆëŠ” ì§€ê¸ˆ ì§‘ì— ê°€ë„ ì¢‹ë‹¤. (í—ˆê°€)", options:["can","must","should","will"], answer:"can", explanation:"í—ˆê°€ì˜ ì˜ë¯¸ can ë˜ëŠ” may." },
  { id:8, topic:"modal", en:"You ____ not smoke here.", ko:"ì—¬ê¸°ì„œ ë‹´ë°°ë¥¼ í”¼ìš°ë©´ ì•ˆ ëœë‹¤. (ê¸ˆì§€)", options:["must","don't","need","would"], answer:"must", explanation:"must not (ê¸ˆì§€)." },
  { id:9, topic:"modal", en:"She ____ be sick.", ko:"ê·¸ë…€ëŠ” ì•„í”ˆ ê²Œ í‹€ë¦¼ì—†ë‹¤. (ê°•í•œ ì¶”ì¸¡)", options:["must","should","can","need"], answer:"must", explanation:"must be (~ì„ì— í‹€ë¦¼ì—†ë‹¤)." },
  { id:10, topic:"modal", en:"You ____ see a doctor.", ko:"ë„ˆëŠ” ì˜ì‚¬ë¥¼ ë³´ëŠ” ê²Œ ì¢‹ê² ë‹¤. (ì¶©ê³ )", options:["should","must","can","will"], answer:"should", explanation:"should (ì¶©ê³ /ì¡°ì–¸)." },
  { id:107, topic:"modal", en:"You ____ have to do it.", ko:"ë„ˆëŠ” ê·¸ê²ƒì„ í•  í•„ìš”ê°€ ì—†ë‹¤.", options:["don't","mustn't","shouldn't","cannot"], answer:"don't", explanation:"don't have to (=need not) : í•  í•„ìš” ì—†ë‹¤." },
  { id:108, topic:"modal", en:"It ____ be true.", ko:"ê·¸ê²ƒì´ ì‚¬ì‹¤ì¼ ë¦¬ê°€ ì—†ë‹¤. (ë¶€ì • ì¶”ì¸¡)", options:["cannot","must not","should not","may not"], answer:"cannot", explanation:"cannot be (~ì¼ ë¦¬ê°€ ì—†ë‹¤)." },
  { id:109, topic:"modal", en:"He ____ have passed the exam.", ko:"ê·¸ëŠ” ì‹œí—˜ì— í•©ê²©í–ˆìŒì— í‹€ë¦¼ì—†ë‹¤. (ê³¼ê±°)", options:["must","should","can","would"], answer:"must", explanation:"must have p.p. (ê³¼ê±°ì— ëŒ€í•œ ê°•í•œ ì¶”ì¸¡)." },
  { id:110, topic:"modal", en:"I ____ have studied harder.", ko:"ë‚˜ëŠ” ë” ì—´ì‹¬íˆ ê³µë¶€í–ˆì–´ì•¼ í–ˆë‹¤. (í›„íšŒ)", options:["should","must","can","may"], answer:"should", explanation:"should have p.p. (~í–ˆì–´ì•¼ í–ˆëŠ”ë°)." },
  { id:111, topic:"modal", en:"I ____ to swim every day.", ko:"ë‚˜ëŠ” ë§¤ì¼ ìˆ˜ì˜í•˜ê³¤ í–ˆë‹¤.", options:["used","use","would","could"], answer:"used", explanation:"used to (~í•˜ê³¤ í–ˆë‹¤)." },
  { id:112, topic:"modal", en:"____ I help you?", ko:"ë„ì™€ë“œë¦´ê¹Œìš”?", options:["May","Will","Shall","Must"], answer:"May", explanation:"May I...? (ì œì•ˆ/í—ˆê°€)." },
  { id:113, topic:"modal", en:"You ____ better stop now.", ko:"ë„ˆëŠ” ì§€ê¸ˆ ë©ˆì¶”ëŠ” ê²Œ ë‚«ë‹¤.", options:["had","have","did","should"], answer:"had", explanation:"had better (~í•˜ëŠ” ê²Œ ë‚«ë‹¤)." },
  { id:114, topic:"modal", en:"Would you ____ opening the door?", ko:"ë¬¸ ì¢€ ì—´ì–´ì£¼ì‹œê² ì–´ìš”?", options:["mind","like","want","care"], answer:"mind", explanation:"Would you mind -ing?" },

  // --- ê´€ê³„ëŒ€ëª…ì‚¬ ---
  { id:11, topic:"relative", en:"This is the man ____ helped me.", ko:"ì´ë¶„ì´ ë‚˜ë¥¼ ë„ì™€ì¤€ ë‚¨ìë‹¤.", options:["who","which","whose","whom"], answer:"who", explanation:"ì„ í–‰ì‚¬ ì‚¬ëŒ(man) + ì£¼ê²© = who." },
  { id:12, topic:"relative", en:"I lost the book ____ you gave me.", ko:"ë„¤ê°€ ì¤€ ì±…ì„ ìƒì–´ë²„ë ¸ë‹¤.", options:["which","who","what","whose"], answer:"which", explanation:"ì„ í–‰ì‚¬ ì‚¬ë¬¼(book) = which." },
  { id:13, topic:"relative", en:"This is ____ I want.", ko:"ì´ê²ƒì´ ë‚´ê°€ ì›í•˜ëŠ” ê²ƒì´ë‹¤.", options:["what","that","which","who"], answer:"what", explanation:"ì„ í–‰ì‚¬ ì—†ìŒ + '~í•˜ëŠ” ê²ƒ' = what." },
  { id:14, topic:"relative", en:"I have a dog ____ name is Max.", ko:"ë‚˜ëŠ” ì´ë¦„ì´ Maxì¸ ê°œë¥¼ ê°€ì§€ê³  ìˆë‹¤.", options:["whose","who","which","that"], answer:"whose", explanation:"ì†Œìœ ê²© (ê·¸ ê°œì˜ ì´ë¦„) = whose." },
  { id:115, topic:"relative", en:"Look at the boy and the dog ____ are running.", ko:"ë‹¬ë¦¬ê³  ìˆëŠ” ì†Œë…„ê³¼ ê°œë¥¼ ë´ë¼.", options:["that","who","which","what"], answer:"that", explanation:"ì‚¬ëŒ+ë™ë¬¼ ì„ í–‰ì‚¬ëŠ” that ì‚¬ìš©." },
  { id:116, topic:"relative", en:"He is the only man ____ I trust.", ko:"ê·¸ëŠ” ë‚´ê°€ ë¯¿ëŠ” ìœ ì¼í•œ ì‚¬ëŒì´ë‹¤.", options:["that","who","which","whom"], answer:"that", explanation:"the only, the very ë“±ìœ¼ë¡œ í•œì •ë˜ë©´ that ì„ í˜¸." },
  { id:117, topic:"relative", en:"My mom, ____ is a teacher, is kind.", ko:"ë‚˜ì˜ ì—„ë§ˆëŠ”, ì„ ìƒë‹˜ì´ì‹ ë°, ì¹œì ˆí•˜ë‹¤.", options:["who","that","which","what"], answer:"who", explanation:"ê³„ì†ì  ìš©ë²•(ì½¤ë§ˆ ë’¤)ì—ëŠ” that ë¶ˆê°€. ì‚¬ëŒ(mom)ì´ë¯€ë¡œ who." },
  { id:118, topic:"relative", en:"I said nothing, ____ made him angry.", ko:"ë‚˜ëŠ” ì•„ë¬´ ë§ë„ ì•ˆ í–ˆëŠ”ë°, ê·¸ê²ƒì´ ê·¸ë¥¼ í™”ë‚˜ê²Œ í–ˆë‹¤.", options:["which","that","what","who"], answer:"which", explanation:"ì• ë¬¸ì¥ ì „ì²´ë¥¼ ë°›ëŠ” ê³„ì†ì  ìš©ë²• which." },
  { id:119, topic:"relative", en:"Show me the thing ____ is in your pocket.", ko:"ë„¤ ì£¼ë¨¸ë‹ˆì— ìˆëŠ” ê²ƒì„ ë³´ì—¬ì¤˜.", options:["that","what","who","whom"], answer:"that", explanation:"ì„ í–‰ì‚¬(thing)ê°€ ìˆìœ¼ë¯€ë¡œ that/which. whatì€ ë¶ˆê°€." },
  { id:120, topic:"relative", en:"Do you know the girl ____ I met yesterday?", ko:"ë‚´ê°€ ì–´ì œ ë§Œë‚œ ì†Œë…€ë¥¼ ì•„ë‹ˆ?", options:["whom","which","whose","what"], answer:"whom", explanation:"ëª©ì ê²© ê´€ê³„ëŒ€ëª…ì‚¬ (who/whom/that)." },
  { id:121, topic:"relative", en:"This is the house in ____ I live.", ko:"ì´ê²ƒì€ ë‚´ê°€ ì‚¬ëŠ” ì§‘ì´ë‹¤.", options:["which","that","where","what"], answer:"which", explanation:"ì „ì¹˜ì‚¬(in) ë’¤ì—ëŠ” that ë¶ˆê°€. in which." },
  { id:122, topic:"relative", en:"Remember ____ I told you.", ko:"ë‚´ê°€ ë„ˆì—ê²Œ ë§í•œ ê²ƒì„ ê¸°ì–µí•´ë¼.", options:["what","that","which","who"], answer:"what", explanation:"ì„ í–‰ì‚¬ ì—†ìŒ = what." },

  // --- ê´€ê³„ë¶€ì‚¬ ---
  { id:15, topic:"relativeAdverb", en:"This is the place ____ we met.", ko:"ì—¬ê¸°ê°€ ìš°ë¦¬ê°€ ë§Œë‚¬ë˜ ì¥ì†Œë‹¤.", options:["where","when","why","how"], answer:"where", explanation:"ì¥ì†Œ(place) + ì™„ì „í•œ ë¬¸ì¥ = where." },
  { id:16, topic:"relativeAdverb", en:"I know the reason ____ he is mad.", ko:"ë‚˜ëŠ” ê·¸ê°€ í™”ë‚œ ì´ìœ ë¥¼ ì•ˆë‹¤.", options:["why","where","when","how"], answer:"why", explanation:"ì´ìœ (reason) = why." },
  { id:123, topic:"relativeAdverb", en:"Friday is the day ____ I am busy.", ko:"ê¸ˆìš”ì¼ì€ ë‚´ê°€ ë°”ìœ ë‚ ì´ë‹¤.", options:["when","where","why","how"], answer:"when", explanation:"ì‹œê°„(day) = when." },
  { id:124, topic:"relativeAdverb", en:"Tell me ____ you did it.", ko:"ë„¤ê°€ ê·¸ê±¸ ì–´ë–»ê²Œ í–ˆëŠ”ì§€ ë§í•´ì¤˜.", options:["how","the way","the way how","which"], answer:"how", explanation:"ë°©ë²•ì€ how ë˜ëŠ” the way í•˜ë‚˜ë§Œ ì”€ (the way how ë¶ˆê°€)." },
  { id:125, topic:"relativeAdverb", en:"This is the house ____ I live.", ko:"ì´ê³³ì€ ë‚´ê°€ ì‚¬ëŠ” ì§‘ì´ë‹¤.", options:["where","which","that","what"], answer:"where", explanation:"ì™„ì „í•œ ë¬¸ì¥(I live) + ì¥ì†Œ = where." },
  { id:126, topic:"relativeAdverb", en:"Do you remember the time ____ we started?", ko:"ìš°ë¦¬ê°€ ì‹œì‘í•œ ì‹œê°„ì„ ê¸°ì–µí•˜ë‹ˆ?", options:["when","where","why","which"], answer:"when", explanation:"ì‹œê°„ = when." },
  { id:127, topic:"relativeAdverb", en:"That is the reason ____ I like her.", ko:"ê·¸ê²ƒì´ ë‚´ê°€ ê·¸ë…€ë¥¼ ì¢‹ì•„í•˜ëŠ” ì´ìœ ë‹¤.", options:["why","for which","that","All above"], answer:"All above", explanation:"why, for which, that ëª¨ë‘ ê°€ëŠ¥." },
  { id:128, topic:"relativeAdverb", en:"Spring is the season ____ flowers bloom.", ko:"ë´„ì€ ê½ƒì´ í”¼ëŠ” ê³„ì ˆì´ë‹¤.", options:["when","where","why","how"], answer:"when", explanation:"ì‹œê°„(season) = when." },
  
  // --- ë¹„êµê¸‰/ìµœìƒê¸‰ ---
  { id:17, topic:"comparison", en:"He is ____ than me.", ko:"ê·¸ëŠ” ë‚˜ë³´ë‹¤ í‚¤ê°€ í¬ë‹¤.", options:["taller","tall","tallest","more tall"], answer:"taller", explanation:"tall + er (ë¹„êµê¸‰)." },
  { id:18, topic:"comparison", en:"This is the ____ movie.", ko:"ì´ê²ƒì€ ê°€ì¥ ìŠ¬í”ˆ ì˜í™”ë‹¤.", options:["saddest","sadder","sad","most sad"], answer:"saddest", explanation:"the + sad(d)est (ìµœìƒê¸‰)." },
  { id:129, topic:"comparison", en:"Math is ____ difficult than English.", ko:"ìˆ˜í•™ì€ ì˜ì–´ë³´ë‹¤ ë” ì–´ë µë‹¤.", options:["more","most","very","much"], answer:"more", explanation:"3ìŒì ˆ ì´ìƒ(difficult)ì€ more ì‚¬ìš©." },
  { id:130, topic:"comparison", en:"It is ____ better now.", ko:"ì§€ê¸ˆì€ í›¨ì”¬ ë” ë‚«ë‹¤.", options:["much","very","many","so"], answer:"much", explanation:"ë¹„êµê¸‰ ê°•ì¡°: much, even, still, far, a lot." },
  { id:131, topic:"comparison", en:"She is the ____ girl in the class.", ko:"ê·¸ë…€ëŠ” ë°˜ì—ì„œ ê°€ì¥ ì˜ˆìœ ì†Œë…€ë‹¤.", options:["prettiest","prettier","pretty","most pretty"], answer:"prettiest", explanation:"pretty -> yë¥¼ ië¡œ ë°”ê¾¸ê³  est." },
  { id:132, topic:"comparison", en:"The ____, the better.", ko:"ë¹ ë¥´ë©´ ë¹ ë¥¼ìˆ˜ë¡ ì¢‹ë‹¤.", options:["sooner","soon","soonest","more soon"], answer:"sooner", explanation:"The ë¹„êµê¸‰, the ë¹„êµê¸‰ êµ¬ë¬¸." },
  { id:133, topic:"comparison", en:"He is as ____ as a lion.", ko:"ê·¸ëŠ” ì‚¬ìë§Œí¼ ìš©ê°í•˜ë‹¤.", options:["brave","braver","bravest","more brave"], answer:"brave", explanation:"as + ì›ê¸‰ + as." },
  { id:134, topic:"comparison", en:"This box is ____ than that one.", ko:"ì´ ìƒìê°€ ì €ê²ƒë³´ë‹¤ ë” ë¬´ê²ë‹¤.", options:["heavier","heavy","heaviest","more heavy"], answer:"heavier", explanation:"heavy -> heavier." },

  // --- ì „ì¹˜ì‚¬ ---
  { id:19, topic:"preposition", en:"See you ____ 5 o'clock.", ko:"5ì‹œì— ë³´ì.", options:["at","on","in","to"], answer:"at", explanation:"ì‹œê° ì•ì—ëŠ” at." },
  { id:20, topic:"preposition", en:"My birthday is ____ May.", ko:"ë‚´ ìƒì¼ì€ 5ì›”ì— ìˆë‹¤.", options:["in","on","at","of"], answer:"in", explanation:"ì›”(Month) ì•ì—ëŠ” in." },
  { id:135, topic:"preposition", en:"I was born ____ 2005.", ko:"ë‚˜ëŠ” 2005ë…„ì— íƒœì–´ë‚¬ë‹¤.", options:["in","on","at","for"], answer:"in", explanation:"ë…„ë„ ì•ì—ëŠ” in." },
  { id:136, topic:"preposition", en:"The book is ____ the table.", ko:"ì±…ì€ íƒì ìœ„ì— ìˆë‹¤.", options:["on","in","at","to"], answer:"on", explanation:"í‘œë©´ ìœ„ëŠ” on." },
  { id:137, topic:"preposition", en:"He runs ____ the morning.", ko:"ê·¸ëŠ” ì•„ì¹¨ì— ë‹¬ë¦°ë‹¤.", options:["in","at","on","to"], answer:"in", explanation:"in the morning." },
  { id:138, topic:"preposition", en:"I will wait ____ Monday.", ko:"ì›”ìš”ì¼ê¹Œì§€ ê¸°ë‹¤ë¦´ê²Œ. (ê³„ì†)", options:["until","by","for","on"], answer:"until", explanation:"ê³„ì†ë˜ëŠ” ìƒíƒœëŠ” until." },
  { id:139, topic:"preposition", en:"Submit it ____ Friday.", ko:"ê¸ˆìš”ì¼ê¹Œì§€ ì œì¶œí•´ë¼. (ì™„ë£Œ)", options:["by","until","on","at"], answer:"by", explanation:"ê¸°í•œ ë‚´ ì™„ë£ŒëŠ” by." },
  { id:140, topic:"preposition", en:"He is good ____ math.", ko:"ê·¸ëŠ” ìˆ˜í•™ì„ ì˜í•œë‹¤.", options:["at","in","on","for"], answer:"at", explanation:"be good at (~ì„ ì˜í•˜ë‹¤)." },

  // --- ì ‘ì†ì‚¬ ---
  { id:21, topic:"conjunction", en:"I was sick, ____ I stayed home.", ko:"ë‚˜ëŠ” ì•„íŒ ë‹¤, ê·¸ë˜ì„œ ì§‘ì— ìˆì—ˆë‹¤.", options:["so","because","but","if"], answer:"so", explanation:"ê²°ê³¼ë¥¼ ë‚˜íƒ€ë‚´ëŠ” so." },
  { id:22, topic:"conjunction", en:"____ it rained, we played soccer.", ko:"ë¹„ê°€ ì™”ì§€ë§Œ ìš°ë¦¬ëŠ” ì¶•êµ¬ë¥¼ í–ˆë‹¤.", options:["Although","Because","If","Since"], answer:"Although", explanation:"ì–‘ë³´(ë¹„ë¡ ~ì¼ì§€ë¼ë„) Although." },
  { id:141, topic:"conjunction", en:"I couldn't go ____ of the rain.", ko:"ë¹„ ë•Œë¬¸ì— ëª» ê°”ë‹¤.", options:["because","so","due","since"], answer:"because", explanation:"ë’¤ì— ofê°€ ìˆìœ¼ë¯€ë¡œ because of." },
  { id:142, topic:"conjunction", en:"Study hard, ____ you will pass.", ko:"ì—´ì‹¬íˆ ê³µë¶€í•´ë¼, ê·¸ëŸ¬ë©´ í•©ê²©í•  ê²ƒì´ë‹¤.", options:["and","or","but","so"], answer:"and", explanation:"ëª…ë ¹ë¬¸, and (ê·¸ëŸ¬ë©´)." },
  { id:143, topic:"conjunction", en:"Hurry up, ____ you will be late.", ko:"ì„œë‘˜ëŸ¬ë¼, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ëŠ¦ì„ ê²ƒì´ë‹¤.", options:["or","and","but","so"], answer:"or", explanation:"ëª…ë ¹ë¬¸, or (ê·¸ë ‡ì§€ ì•Šìœ¼ë©´)." },
  { id:144, topic:"conjunction", en:"Wait ____ I come back.", ko:"ë‚´ê°€ ëŒì•„ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤.", options:["until","while","if","because"], answer:"until", explanation:"~í•  ë•Œê¹Œì§€." },
  { id:145, topic:"conjunction", en:"Do you know ____ he is rich?", ko:"ê·¸ê°€ ë¶€ìì¸ì§€ ì•„ë‹Œì§€ ì•„ë‹ˆ?", options:["if","what","that","which"], answer:"if", explanation:"~ì¸ì§€ ì•„ë‹Œì§€ (if/whether)." },
  { id:146, topic:"conjunction", en:"I like him ____ he is kind.", ko:"ê·¸ê°€ ì¹œì ˆí•˜ê¸° ë•Œë¬¸ì— ë‚˜ëŠ” ê·¸ë¥¼ ì¢‹ì•„í•œë‹¤.", options:["because","although","so","but"], answer:"because", explanation:"ì´ìœ ë¥¼ ë‚˜íƒ€ë‚´ëŠ” because." },

  // --- ê°€ì •ë²• í˜„ì¬/ì¡°ê±´ë¬¸ ---
  { id:147, topic:"conditionalPresent", en:"If it ____ tomorrow, I will stay home.", ko:"ë‚´ì¼ ë¹„ê°€ ì˜¤ë©´, ë‚˜ëŠ” ì§‘ì— ìˆì„ ê²ƒì´ë‹¤.", options:["rains","will rain","rain","rained"], answer:"rains", explanation:"ì¡°ê±´ ë¶€ì‚¬ì ˆì—ì„œëŠ” í˜„ì¬ì‹œì œê°€ ë¯¸ë˜ë¥¼ ëŒ€ì‹ í•¨." },
  { id:148, topic:"conditionalPresent", en:"If you ____ ice, it melts.", ko:"ì–¼ìŒì„ ê°€ì—´í•˜ë©´ ë…¹ëŠ”ë‹¤.", options:["heat","will heat","heated","heats"], answer:"heat", explanation:"ë¶ˆë³€ì˜ ì§„ë¦¬(Zero Conditional)ëŠ” í˜„ì¬ì‹œì œ." },
  { id:149, topic:"conditionalPresent", en:"Unless you ____, you will miss the bus.", ko:"ë›°ì§€ ì•Šìœ¼ë©´ ë²„ìŠ¤ë¥¼ ë†“ì¹  ê²ƒì´ë‹¤.", options:["run","don't run","will run","ran"], answer:"run", explanation:"Unless = If not. ê¸ì •ë¬¸ í˜•íƒœ(run)ë¥¼ ì”€." },
  { id:150, topic:"conditionalPresent", en:"I will tell him if he ____.", ko:"ê·¸ê°€ ì˜¤ë©´ ê·¸ì—ê²Œ ë§í• ê²Œ.", options:["comes","will come","came","come"], answer:"comes", explanation:"ì¡°ê±´ì ˆ í˜„ì¬ì‹œì œ." },
  { id:151, topic:"conditionalPresent", en:"If the weather ____ fine, let's go out.", ko:"ë‚ ì”¨ê°€ ì¢‹ìœ¼ë©´ ë‚˜ê°€ì.", options:["is","will be","was","are"], answer:"is", explanation:"ì¡°ê±´ì ˆ í˜„ì¬ì‹œì œ." },
  { id:152, topic:"conditionalPresent", en:"You can go if you ____ finished.", ko:"ë‹¤ ëëƒˆë‹¤ë©´ ê°€ë„ ì¢‹ë‹¤.", options:["have","had","will have","are"], answer:"have", explanation:"ì¡°ê±´ì ˆì—ì„œ ì™„ë£Œ ì‹œì œë„ í˜„ì¬ì™„ë£Œë¥¼ ì”€." },

  // --- ê°€ì •ë²• ê³¼ê±° ---
  { id:23, topic:"conditionalPast", en:"If I ____ rich, I would buy a car.", ko:"ë‚´ê°€ ë¶€ìë¼ë©´ ì°¨ë¥¼ ì‚´ í…ë°.", options:["were","was","am","be"], answer:"were", explanation:"ê°€ì •ë²• ê³¼ê±° beë™ì‚¬ëŠ” were." },
  { id:24, topic:"conditionalPast", en:"If I ____ the answer, I would tell you.", ko:"ë‚´ê°€ ë‹µì„ ì•ˆë‹¤ë©´ ë„ˆì—ê²Œ ë§í•´ì¤„ í…ë°.", options:["knew","know","known","knows"], answer:"knew", explanation:"ê°€ì •ë²• ê³¼ê±° ë™ì‚¬ëŠ” ê³¼ê±°í˜•." },
  { id:153, topic:"conditionalPast", en:"If I ____ you, I wouldn't do that.", ko:"ë‚´ê°€ ë„ˆë¼ë©´ ê·¸ë ‡ê²Œ ì•ˆ í•  ê±°ì•¼.", options:["were","was","am","are"], answer:"were", explanation:"If I were you (ê´€ìš©ì  í‘œí˜„)." },
  { id:154, topic:"conditionalPast", en:"I wish I ____ fly.", ko:"ë‚´ê°€ ë‚  ìˆ˜ ìˆë‹¤ë©´ ì¢‹ì„ í…ë°.", options:["could","can","will","may"], answer:"could", explanation:"I wish + ê³¼ê±°ì¡°ë™ì‚¬." },
  { id:155, topic:"conditionalPast", en:"He acts as if he ____ my boss.", ko:"ê·¸ëŠ” ë§ˆì¹˜ ë‚´ ìƒì‚¬ì¸ ê²ƒì²˜ëŸ¼ í–‰ë™í•œë‹¤.", options:["were","is","was","has been"], answer:"were", explanation:"as if + ê°€ì •ë²• ê³¼ê±°." },
  { id:156, topic:"conditionalPast", en:"If it ____ not for water, we would die.", ko:"ë¬¼ì´ ì—†ë‹¤ë©´ ìš°ë¦¬ëŠ” ì£½ì„ ê²ƒì´ë‹¤.", options:["were","is","had","was"], answer:"were", explanation:"If it were not for (~ì´ ì—†ë‹¤ë©´)." },
  { id:157, topic:"conditionalPast", en:"I wish I ____ a car.", ko:"ì°¨ê°€ ìˆë‹¤ë©´ ì¢‹ì„ í…ë°.", options:["had","have","will have","have had"], answer:"had", explanation:"í˜„ì¬ ì†Œë§ = I wish + ê³¼ê±°ë™ì‚¬." },
  { id:158, topic:"conditionalPast", en:"Without air, we ____ not live.", ko:"ê³µê¸°ê°€ ì—†ë‹¤ë©´ ì‚´ ìˆ˜ ì—†ì„ ê²ƒì´ë‹¤.", options:["could","can","will","may"], answer:"could", explanation:"ê°€ì •ë²• ê³¼ê±° ì£¼ì ˆ (could/would)." },

  // --- ê°€ì •ë²• ê³¼ê±°ì™„ë£Œ ---
  { id:25, topic:"conditionalPastPerfect", en:"If I ____ studied hard, I would have passed.", ko:"ë‚´ê°€ ì—´ì‹¬íˆ ê³µë¶€í–ˆë”ë¼ë©´ í•©ê²©í–ˆì„ í…ë°.", options:["had","have","has","did"], answer:"had", explanation:"If + had p.p." },
  { id:26, topic:"conditionalPastPerfect", en:"I wish I ____ met her.", ko:"ê·¸ë…€ë¥¼ ë§Œë‚¬ë”ë¼ë©´ ì¢‹ì•˜ì„ í…ë°.", options:["had","have","has","did"], answer:"had", explanation:"ê³¼ê±° í›„íšŒ = I wish + had p.p." },
  { id:159, topic:"conditionalPastPerfect", en:"If it ____ not rained, we would have gone.", ko:"ë¹„ê°€ ì•ˆ ì™”ë‹¤ë©´ ê°”ì„ í…ë°.", options:["had","has","have","was"], answer:"had", explanation:"If + had p.p." },
  { id:160, topic:"conditionalPastPerfect", en:"Without your help, I would ____ failed.", ko:"ë„ˆì˜ ë„ì›€ì´ ì—†ì—ˆë‹¤ë©´ ë‚˜ëŠ” ì‹¤íŒ¨í–ˆì„ ê²ƒì´ë‹¤.", options:["have","had","has","be"], answer:"have", explanation:"would have p.p." },
  { id:161, topic:"conditionalPastPerfect", en:"He spoke as if he ____ seen it.", ko:"ê·¸ëŠ” ê·¸ê²ƒì„ ë´¤ë˜ ê²ƒì²˜ëŸ¼ ë§í–ˆë‹¤.", options:["had","has","have","was"], answer:"had", explanation:"as if + had p.p. (ê³¼ê±° ì‚¬ì‹¤ ë°˜ëŒ€)." },
  { id:162, topic:"conditionalPastPerfect", en:"If I had known, I ____ have told you.", ko:"ì•Œì•˜ë”ë¼ë©´ ë§í•´ì¤¬ì„ í…ë°.", options:["would","will","can","may"], answer:"would", explanation:"would have p.p." },
  { id:163, topic:"conditionalPastPerfect", en:"But for his advice, I ____ have failed.", ko:"ê·¸ì˜ ì¡°ì–¸ì´ ì—†ì—ˆë‹¤ë©´ ì‹¤íŒ¨í–ˆì„ ê²ƒì´ë‹¤.", options:["might","may","can","will"], answer:"might", explanation:"might have p.p." },
  { id:164, topic:"conditionalPastPerfect", en:"I should ____ studied harder.", ko:"ë” ì—´ì‹¬íˆ ê³µë¶€í–ˆì–´ì•¼ í–ˆëŠ”ë°.", options:["have","had","has","be"], answer:"have", explanation:"should have p.p. (í›„íšŒ)." },

  // --- ìˆ˜ë™íƒœ ---
  { id:27, topic:"passive", en:"The room ____ cleaned by him.", ko:"ê·¸ ë°©ì€ ê·¸ì— ì˜í•´ ì²­ì†Œë˜ì—ˆë‹¤.", options:["was","is","were","did"], answer:"was", explanation:"ê³¼ê±° ë‹¨ìˆ˜ ìˆ˜ë™íƒœ." },
  { id:28, topic:"passive", en:"English is ____ in many countries.", ko:"ì˜ì–´ëŠ” ë§ì€ ë‚˜ë¼ì—ì„œ ì“°ì¸ë‹¤.", options:["spoken","speak","spoke","speaking"], answer:"spoken", explanation:"be + p.p. (speak-spoke-spoken)." },
  { id:165, topic:"passive", en:"The letter will ____ sent tomorrow.", ko:"í¸ì§€ëŠ” ë‚´ì¼ ë³´ë‚´ì§ˆ ê²ƒì´ë‹¤.", options:["be","been","being","is"], answer:"be", explanation:"will be p.p." },
  { id:166, topic:"passive", en:"The car is ____ repaired now.", ko:"ì°¨ëŠ” ì§€ê¸ˆ ìˆ˜ë¦¬ë˜ëŠ” ì¤‘ì´ë‹¤.", options:["being","be","been","is"], answer:"being", explanation:"ì§„í–‰ ìˆ˜ë™íƒœ: be being p.p." },
  { id:167, topic:"passive", en:"He was ____ in 1990.", ko:"ê·¸ëŠ” 1990ë…„ì— íƒœì–´ë‚¬ë‹¤.", options:["born","bear","bore","birth"], answer:"born", explanation:"be born (íƒœì–´ë‚˜ë‹¤)." },
  { id:168, topic:"passive", en:"She is interested ____ music.", ko:"ê·¸ë…€ëŠ” ìŒì•…ì— ê´€ì‹¬ì´ ìˆë‹¤.", options:["in","on","at","with"], answer:"in", explanation:"be interested in." },
  { id:169, topic:"passive", en:"The mountain is covered ____ snow.", ko:"ì‚°ì€ ëˆˆìœ¼ë¡œ ë®ì—¬ ìˆë‹¤.", options:["with","by","at","in"], answer:"with", explanation:"be covered with." },
  { id:170, topic:"passive", en:"This bag was ____ in Italy.", ko:"ì´ ê°€ë°©ì€ ì´íƒˆë¦¬ì•„ì—ì„œ ë§Œë“¤ì–´ì¡Œë‹¤.", options:["made","make","making","makes"], answer:"made", explanation:"be made in." },

  // --- ì‚¬ì—­ë™ì‚¬ ---
  { id:29, topic:"causative", en:"He made me ____ the car.", ko:"ê·¸ëŠ” ë‚˜ì—ê²Œ ì„¸ì°¨ë¥¼ ì‹œì¼°ë‹¤.", options:["wash","to wash","washing","washed"], answer:"wash", explanation:"make + O + ë™ì‚¬ì›í˜•." },
  { id:30, topic:"causative", en:"I had my hair ____.", ko:"ë‚˜ëŠ” ë¨¸ë¦¬ë¥¼ ì˜ëë‹¤. (ë¯¸ìš©ì‚¬ì—ê²Œ ì‹œì¼œì„œ)", options:["cut","to cut","cutting","cuts"], answer:"cut", explanation:"have + ì‚¬ë¬¼ + p.p. (ìˆ˜ë™ ê´€ê³„)." },
  { id:171, topic:"causative", en:"Let him ____.", ko:"ê·¸ê°€ ê°€ê²Œ í•´ë¼.", options:["go","to go","going","gone"], answer:"go", explanation:"let + O + ë™ì‚¬ì›í˜•." },
  { id:172, topic:"causative", en:"I got him ____ the window.", ko:"ë‚˜ëŠ” ê·¸ì—ê²Œ ì°½ë¬¸ì„ ë‹¦ê²Œ í–ˆë‹¤.", options:["to clean","clean","cleaning","cleaned"], answer:"to clean", explanation:"get + ì‚¬ëŒ + toë¶€ì •ì‚¬." },
  { id:173, topic:"causative", en:"She helped me ____ my homework.", ko:"ê·¸ë…€ëŠ” ë‚´ê°€ ìˆ™ì œí•˜ëŠ” ê±¸ ë„ì™”ë‹¤.", options:["finish","finishing","finished","finishes"], answer:"finish", explanation:"helpëŠ” ì›í˜• ë˜ëŠ” toë¶€ì •ì‚¬ ê°€ëŠ¥." },
  { id:174, topic:"causative", en:"Don't make me ____.", ko:"ë‚˜ë¥¼ ìš¸ê²Œ í•˜ì§€ ë§ˆ.", options:["cry","to cry","crying","cried"], answer:"cry", explanation:"make + O + ì›í˜•." },
  { id:175, topic:"causative", en:"I had the computer ____.", ko:"ë‚˜ëŠ” ì»´í“¨í„°ë¥¼ ìˆ˜ë¦¬í–ˆë‹¤ (ë§¡ê²¨ì„œ).", options:["fixed","fix","fixing","to fix"], answer:"fixed", explanation:"have + ì‚¬ë¬¼ + p.p." },
  { id:176, topic:"causative", en:"Please let me ____.", ko:"ì œê°€ ì•Œê²Œ í•´ì£¼ì„¸ìš” (ì•Œë ¤ì£¼ì„¸ìš”).", options:["know","to know","knowing","knew"], answer:"know", explanation:"Let me know." },

  // --- ì§€ê°ë™ì‚¬ ---
  { id:31, topic:"perception", en:"I saw him ____ across the street.", ko:"ë‚˜ëŠ” ê·¸ê°€ ê¸¸ì„ ê±´ë„ˆëŠ” ê²ƒì„ ë³´ì•˜ë‹¤.", options:["run","to run","ran","runs"], answer:"run", explanation:"ì§€ê°ë™ì‚¬ + O + ì›í˜•/-ing." },
  { id:32, topic:"perception", en:"I heard someone ____ my name.", ko:"ëˆ„êµ°ê°€ ë‚´ ì´ë¦„ì„ ë¶€ë¥´ëŠ” ê²ƒì„ ë“¤ì—ˆë‹¤.", options:["calling","to call","called","calls"], answer:"calling", explanation:"ì§„í–‰ ì¤‘ì¸ ë™ì‘ì€ -ing." },
  { id:177, topic:"perception", en:"Did you see the birds ____?", ko:"ìƒˆë“¤ì´ ë‚ ì•„ê°€ëŠ” ê±¸ ë´¤ë‹ˆ?", options:["fly","to fly","flew","flown"], answer:"fly", explanation:"see + O + ì›í˜•." },
  { id:178, topic:"perception", en:"I felt the house ____.", ko:"ë‚˜ëŠ” ì§‘ì´ í”ë“¤ë¦¬ëŠ” ê²ƒì„ ëŠê¼ˆë‹¤.", options:["shake","to shake","shook","shaken"], answer:"shake", explanation:"feel + O + ì›í˜•/-ing." },
  { id:179, topic:"perception", en:"Watch him ____ the ball.", ko:"ê·¸ê°€ ê³µì„ ì°¨ëŠ” ê²ƒì„ ì˜ ë´.", options:["kick","to kick","kicked","kicks"], answer:"kick", explanation:"watch + O + ì›í˜•." },
  { id:180, topic:"perception", en:"I smell something ____.", ko:"ë¬´ì–¸ê°€ íƒ€ëŠ” ëƒ„ìƒˆê°€ ë‚œë‹¤.", options:["burning","burn","to burn","burned"], answer:"burning", explanation:"smell + O + -ing (ì§„í–‰)." },
  { id:181, topic:"perception", en:"He heard his name ____.", ko:"ê·¸ëŠ” ìì‹ ì˜ ì´ë¦„ì´ ë¶ˆë¦¬ëŠ” ê²ƒì„ ë“¤ì—ˆë‹¤.", options:["called","call","calling","to call"], answer:"called", explanation:"ëª©ì ì–´(name)ê°€ ë¶ˆë¦¬ëŠ” ìˆ˜ë™ ê´€ê³„ = p.p." },
  { id:182, topic:"perception", en:"She saw the accident ____.", ko:"ê·¸ë…€ëŠ” ì‚¬ê³ ê°€ ì¼ì–´ë‚˜ëŠ” ê²ƒì„ ë³´ì•˜ë‹¤.", options:["happen","to happen","happened","happens"], answer:"happen", explanation:"see + O + ì›í˜•." },

  // --- ë¶„ì‚¬êµ¬ë¬¸ ---
  { id:33, topic:"participle", en:"____ the room, I saw a mouse.", ko:"ë°©ì— ë“¤ì–´ê°”ì„ ë•Œ, ë‚˜ëŠ” ì¥ë¥¼ ë³´ì•˜ë‹¤.", options:["Entering","Enter","Entered","To enter"], answer:"Entering", explanation:"ëŠ¥ë™ ë¶„ì‚¬êµ¬ë¬¸ (-ing)." },
  { id:34, topic:"participle", en:"____ in English, the book is easy to read.", ko:"ì˜ì–´ë¡œ ì“°ì—¬ ìˆì–´ì„œ, ê·¸ ì±…ì€ ì½ê¸° ì‰½ë‹¤.", options:["Written","Writing","Wrote","Write"], answer:"Written", explanation:"ìˆ˜ë™ ë¶„ì‚¬êµ¬ë¬¸ (Being Written -> Written)." },
  { id:183, topic:"participle", en:"____ tired, I went to bed early.", ko:"í”¼ê³¤í•´ì„œ, ì¼ì° ì¤ë‹¤.", options:["Feeling","Felt","Feel","To feel"], answer:"Feeling", explanation:"ëŠ¥ë™/ì§„í–‰ ì˜ë¯¸ (-ing)." },
  { id:184, topic:"participle", en:"____ left alone, the baby cried.", ko:"í˜¼ì ë‚¨ê²¨ì ¸ì„œ, ì•„ê¸°ëŠ” ìš¸ì—ˆë‹¤.", options:["Left","Leaving","Leave","To leave"], answer:"Left", explanation:"ìˆ˜ë™ ì˜ë¯¸ (Being Left -> Left)." },
  { id:185, topic:"participle", en:"____ not knowing what to do, I asked him.", ko:"ë¬´ì—‡ì„ í• ì§€ ëª°ë¼ì„œ, ê·¸ì—ê²Œ ë¬¼ì–´ë´¤ë‹¤.", options:["Not","No","Never","Don't"], answer:"Not", explanation:"ë¶„ì‚¬êµ¬ë¬¸ì˜ ë¶€ì •ì€ Not + -ing." },
  { id:186, topic:"participle", en:"____ the work, he went out.", ko:"ì¼ì„ ë‹¤ ëë‚´ê³  ë‚˜ì„œ, ê·¸ëŠ” ë‚˜ê°”ë‹¤.", options:["Having finished","Finishing","Finished","Finish"], answer:"Having finished", explanation:"ì™„ë£Œ ë¶„ì‚¬êµ¬ë¬¸ (ì‹œì œê°€ ì•ì„¤ ë•Œ)." },
  { id:187, topic:"participle", en:"Generally ____, women live longer.", ko:"ì¼ë°˜ì ìœ¼ë¡œ ë§í•´ì„œ, ì—¬ìê°€ ë” ì˜¤ë˜ ì‚°ë‹¤.", options:["speaking","spoken","speak","to speak"], answer:"speaking", explanation:"Generally speaking (ê´€ìš©êµ¬)." },
  { id:188, topic:"participle", en:"____ from the sky, the city looks small.", ko:"í•˜ëŠ˜ì—ì„œ ë³´ë©´, ê·¸ ë„ì‹œëŠ” ì‘ì•„ ë³´ì¸ë‹¤.", options:["Seen","Seeing","See","To see"], answer:"Seen", explanation:"(ë„ì‹œê°€) ë³´ì—¬ì§€ëŠ” ê²ƒì´ë¯€ë¡œ ìˆ˜ë™(Seen)." },

  // --- ì¸ì¹­ëŒ€ëª…ì‚¬ ---
  { id:35, topic:"pronoun", en:"I love ____.", ko:"ë‚˜ëŠ” ë‚˜ ìì‹ ì„ ì‚¬ë‘í•œë‹¤.", options:["myself","me","my","mine"], answer:"myself", explanation:"ì£¼ì–´=ëª©ì ì–´ ì¼ ë•Œ ì¬ê·€ëŒ€ëª…ì‚¬." },
  { id:36, topic:"pronoun", en:"This book is ____.", ko:"ì´ ì±…ì€ ë‚˜ì˜ ê²ƒì´ë‹¤.", options:["mine","my","me","myself"], answer:"mine", explanation:"ì†Œìœ ëŒ€ëª…ì‚¬ (mine = my book)." },
  { id:189, topic:"pronoun", en:"She looked at ____ in the mirror.", ko:"ê·¸ë…€ëŠ” ê±°ìš¸ ì†ì˜ ìì‹ ì„ ë³´ì•˜ë‹¤.", options:["herself","her","she","hers"], answer:"herself", explanation:"ì¬ê·€ëŒ€ëª…ì‚¬." },
  { id:190, topic:"pronoun", en:"____ is raining.", ko:"ë¹„ê°€ ì˜¨ë‹¤.", options:["It","This","That","There"], answer:"It", explanation:"ë¹„ì¸ì¹­ ì£¼ì–´ It (ë‚ ì”¨)." },
  { id:191, topic:"pronoun", en:"He did it by ____.", ko:"ê·¸ëŠ” í˜¼ìì„œ ê·¸ê²ƒì„ í–ˆë‹¤.", options:["himself","him","his","he"], answer:"himself", explanation:"by himself (í˜¼ìì„œ)." },
  { id:192, topic:"pronoun", en:"Give ____ the book.", ko:"ë‚˜ì—ê²Œ ê·¸ ì±…ì„ ì¤˜.", options:["me","I","my","mine"], answer:"me", explanation:"ëª©ì ê²© me." },
  { id:193, topic:"pronoun", en:"I hurt ____.", ko:"ë‚˜ëŠ” ë‹¤ì³¤ë‹¤ (ë‚´ ìì‹ ì„ ë‹¤ì¹˜ê²Œ í–ˆë‹¤).", options:["myself","me","my","mine"], answer:"myself", explanation:"ì¬ê·€ëŒ€ëª…ì‚¬." },
  { id:194, topic:"pronoun", en:"Is this hat ____?", ko:"ì´ ëª¨ìëŠ” ë„ˆì˜ ê²ƒì´ë‹ˆ?", options:["yours","your","you","yourself"], answer:"yours", explanation:"ì†Œìœ ëŒ€ëª…ì‚¬ yours." },

  // --- toë¶€ì •ì‚¬ ---
  { id:37, topic:"toinf", en:"I want ____ home.", ko:"ë‚˜ëŠ” ì§‘ì— ê°€ê³  ì‹¶ë‹¤.", options:["to go","going","go","gone"], answer:"to go", explanation:"want + toë¶€ì •ì‚¬." },
  { id:38, topic:"toinf", en:"I have a book ____ read.", ko:"ë‚˜ëŠ” ì½ì„ ì±…ì´ ìˆë‹¤.", options:["to","for","of","in"], answer:"to", explanation:"ëª…ì‚¬ ìˆ˜ì‹ (to read)." },
  { id:195, topic:"toinf", en:"It is hard ____ study math.", ko:"ìˆ˜í•™ì„ ê³µë¶€í•˜ëŠ” ê²ƒì€ ì–´ë µë‹¤.", options:["to","for","of","ing"], answer:"to", explanation:"ê°€ì£¼ì–´ It ... ì§„ì£¼ì–´ to." },
  { id:196, topic:"toinf", en:"He grew up ____ a doctor.", ko:"ê·¸ëŠ” ìë¼ì„œ ì˜ì‚¬ê°€ ë˜ì—ˆë‹¤.", options:["to be","being","be","been"], answer:"to be", explanation:"ê²°ê³¼ì  ìš©ë²• (to be)." },
  { id:197, topic:"toinf", en:"I am happy ____ see you.", ko:"ë„ˆë¥¼ ë§Œë‚˜ì„œ í–‰ë³µí•˜ë‹¤.", options:["to","for","of","about"], answer:"to", explanation:"ê°ì •ì˜ ì›ì¸ (to see)." },
  { id:198, topic:"toinf", en:"He is too tired ____ walk.", ko:"ê·¸ëŠ” ë„ˆë¬´ í”¼ê³¤í•´ì„œ ê±¸ì„ ìˆ˜ ì—†ë‹¤.", options:["to","for","that","so"], answer:"to", explanation:"too ~ to (ë„ˆë¬´ ~í•´ì„œ ~í•  ìˆ˜ ì—†ë‹¤)." },
  { id:199, topic:"toinf", en:"I decided ____ go.", ko:"ë‚˜ëŠ” ê°€ì§€ ì•Šê¸°ë¡œ ê²°ì‹¬í–ˆë‹¤.", options:["not to","to not","no to","don't"], answer:"not to", explanation:"toë¶€ì •ì‚¬ ë¶€ì •ì€ not to." },
  { id:200, topic:"toinf", en:"Please give me something ____ drink.", ko:"ë§ˆì‹¤ ê²ƒ ì¢€ ì£¼ì„¸ìš”.", options:["to","for","of","with"], answer:"to", explanation:"something to drink." },

  // --- ë™ëª…ì‚¬ ---
  { id:39, topic:"gerund", en:"I enjoy ____ TV.", ko:"ë‚˜ëŠ” TV ë³´ëŠ” ê²ƒì„ ì¦ê¸´ë‹¤.", options:["watching","to watch","watch","watched"], answer:"watching", explanation:"enjoy + -ing." },
  { id:40, topic:"gerund", en:"____ is my hobby.", ko:"ìˆ˜ì˜ì€ ë‚´ ì·¨ë¯¸ë‹¤.", options:["Swimming","Swim","Swam","Swims"], answer:"Swimming", explanation:"ì£¼ì–´ë¡œ ì“°ì¸ ë™ëª…ì‚¬." },
  { id:201, topic:"gerund", en:"He gave up ____.", ko:"ê·¸ëŠ” í¡ì—°ì„ í¬ê¸°í–ˆë‹¤.", options:["smoking","to smoke","smoke","smoked"], answer:"smoking", explanation:"give up + -ing." },
  { id:202, topic:"gerund", en:"She is good at ____.", ko:"ê·¸ë…€ëŠ” ì¶¤ì„ ì˜ ì¶˜ë‹¤.", options:["dancing","dance","to dance","danced"], answer:"dancing", explanation:"ì „ì¹˜ì‚¬ ë’¤ì—ëŠ” ë™ëª…ì‚¬." },
  { id:203, topic:"gerund", en:"Would you mind ____ the door?", ko:"ë¬¸ ì¢€ ë‹«ì•„ì£¼ì‹œê² ì–´ìš”?", options:["closing","to close","close","closed"], answer:"closing", explanation:"mind + -ing." },
  { id:204, topic:"gerund", en:"Stop ____ noise.", ko:"ë– ë“¤ì§€ ë§ˆë¼.", options:["making","to make","make","made"], answer:"making", explanation:"stop -ing (~í•˜ë˜ ê²ƒì„ ë©ˆì¶”ë‹¤)." },
  { id:205, topic:"gerund", en:"I finished ____ my homework.", ko:"ë‚˜ëŠ” ìˆ™ì œë¥¼ ëëƒˆë‹¤.", options:["doing","to do","do","did"], answer:"doing", explanation:"finish + -ing." },
  { id:206, topic:"gerund", en:"How about ____ out?", ko:"ë‚˜ê°€ëŠ” ê²Œ ì–´ë•Œ?", options:["going","to go","go","gone"], answer:"going", explanation:"How about -ing?" }
];

/* ==========================================================================
   2. ë¡œì§ í•¨ìˆ˜ë“¤
   ========================================================================== */

// ì…”í”Œ í•¨ìˆ˜
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

// ì´ˆê¸°í™” ë° ìƒíƒœ ë³€ìˆ˜
let shuffledQuestions = [];
let currentQuestionIndex = 0;
let currentTopicForQuiz = '';

// í™”ë©´ ì „í™˜ í•¨ìˆ˜ (ë¬¸ë²• ì„¤ëª… íƒ­)
function showTopic(id) {
  document.querySelectorAll('.topic-section').forEach(el => el.style.display = 'none');
  const target = document.getElementById('topic-' + id);
  if (target) {
    target.style.display = 'block';
    loadNote(id); // ë…¸íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
  }
}

/* --- ë‚˜ë§Œì˜ ë…¸íŠ¸ ê¸°ëŠ¥ (LocalStorage) --- */
function toggleNote(id) {
  const editArea = document.getElementById('note-edit-' + id);
  if (editArea.style.display === 'block') {
    editArea.style.display = 'none';
  } else {
    const saved = localStorage.getItem('note_' + id) || "";
    document.getElementById('note-input-' + id).value = saved;
    editArea.style.display = 'block';
  }
}

function saveNote(id) {
  const val = document.getElementById('note-input-' + id).value;
  localStorage.setItem('note_' + id, val);
  alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
  document.getElementById('note-edit-' + id).style.display = 'none';
  loadNote(id);
}

function loadNote(id) {
  const val = localStorage.getItem('note_' + id);
  const display = document.getElementById('note-display-' + id);
  if (val && val.trim() !== "") {
    display.textContent = "ğŸ“Œ ë‚´ ë©”ëª¨:\n" + val;
    display.style.display = 'block';
  } else {
    display.style.display = 'none';
  }
}

/* --- í€´ì¦ˆ ë¡œì§ (ì¤‘ë³µ ë°©ì§€ Deck System) --- */
function resetQuizState() {
  // ì£¼ì œê°€ ë°”ë€Œë©´ í’€ ì´ˆê¸°í™” í•„ìš”
  shuffledQuestions = [];
  currentQuestionIndex = 0;
  currentTopicForQuiz = '';
  document.getElementById('grammarQuizArea').style.display = 'none';
}

function resetQuizPool() {
  if (confirm("í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ë¬¸ì œ ëª©ë¡ì„ ì´ˆê¸°í™”í•˜ê³  ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
    resetQuizState();
    alert("ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. 'ìƒˆ ë¬¸ì œ'ë¥¼ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”.");
  }
}

function nextQuestion() {
  const topicSelect = document.getElementById('grammarTopic');
  const selectedTopic = topicSelect.value;

  // 1. ì£¼ì œê°€ ë°”ë€Œì—ˆê±°ë‚˜, ì•„ì§ ë±ì´ ì•ˆ ë§Œë“¤ì–´ì¡Œìœ¼ë©´ ìƒˆë¡œ ìƒì„±
  if (selectedTopic !== currentTopicForQuiz || shuffledQuestions.length === 0) {
    currentTopicForQuiz = selectedTopic;
    let pool = [];
    if (selectedTopic === 'all') {
      pool = [...grammarQuestions];
    } else {
      pool = grammarQuestions.filter(q => q.topic === selectedTopic);
    }

    if (pool.length === 0) {
      alert("í•´ë‹¹ ì£¼ì œì˜ ë¬¸ì œê°€ ì•„ì§ ì—†ìŠµë‹ˆë‹¤.");
      return;
    }

    // ì…”í”Œ í›„ ì €ì¥
    shuffleArray(pool);
    shuffledQuestions = pool;
    currentQuestionIndex = 0;
  }

  // 2. ëª¨ë“  ë¬¸ì œë¥¼ ë‹¤ í’€ì—ˆëŠ”ì§€ í™•ì¸
  if (currentQuestionIndex >= shuffledQuestions.length) {
    alert("ì„ íƒí•œ ì£¼ì œì˜ ëª¨ë“  ë¬¸ì œë¥¼ ë‹¤ í’€ì—ˆìŠµë‹ˆë‹¤! \nì²˜ìŒë¶€í„° ë‹¤ì‹œ í’€ë ¤ë©´ 'ë¬¸ì œ ëª©ë¡ ì´ˆê¸°í™”'ë¥¼ ëˆ„ë¥´ì„¸ìš”.");
    return;
  }

  // 3. ë¬¸ì œ ì¶œì œ
  const q = shuffledQuestions[currentQuestionIndex];
  currentQuestionIndex++; // ì¸ë±ìŠ¤ ì¦ê°€

  // UI ì—…ë°ì´íŠ¸
  document.getElementById('grammarQuizArea').style.display = 'block';
  document.getElementById('quizProgress').textContent = `ì§„í–‰: ${currentQuestionIndex} / ${shuffledQuestions.length}`;
  
  document.getElementById('grammarQuestionEn').textContent = "Q. " + q.en;
  document.getElementById('grammarQuestionKo').textContent = q.ko;
  
  const optionsDiv = document.getElementById('grammarOptions');
  optionsDiv.innerHTML = "";
  
  // ë³´ê¸° ì„ê¸°
  let opts = [...q.options];
  shuffleArray(opts);

  opts.forEach(opt => {
    const btn = document.createElement('button');
    btn.textContent = opt;
    btn.onclick = () => checkAnswer(q, opt, btn);
    optionsDiv.appendChild(btn);
  });

  // ê²°ê³¼ì°½ ì´ˆê¸°í™”
  document.getElementById('grammarQuizResult').textContent = "";
  document.getElementById('grammarExplanation').textContent = "";
}

function checkAnswer(qObj, userAns, btnElem) {
  // ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™”
  const btns = document.querySelectorAll('#grammarOptions button');
  btns.forEach(b => {
    b.disabled = true;
    if (b.textContent === qObj.answer) b.style.backgroundColor = "#d4edda"; // ì •ë‹µ ì´ˆë¡
    if (b.textContent === userAns && userAns !== qObj.answer) b.style.backgroundColor = "#f8d7da"; // ì˜¤ë‹µ ë¹¨ê°•
  });

  const resDiv = document.getElementById('grammarQuizResult');
  const explDiv = document.getElementById('grammarExplanation');

  if (userAns === qObj.answer) {
    resDiv.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
    resDiv.style.color = "green";
    // ì˜¤ë‹µ ë¦¬ìŠ¤íŠ¸ì— ìˆë‹¤ë©´ ì œê±°
    wrongList = wrongList.filter(id => id !== qObj.id);
  } else {
    resDiv.textContent = "ì˜¤ë‹µì…ë‹ˆë‹¤. ğŸ˜¢ ì •ë‹µ: " + qObj.answer;
    resDiv.style.color = "red";
    // ì˜¤ë‹µ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ (ì¤‘ë³µ ë°©ì§€)
    if (!wrongList.includes(qObj.id)) {
      wrongList.push(qObj.id);
    }
  }
  updateWrongDisplay();
  explDiv.innerHTML = "ğŸ’¡ <b>í•´ì„¤:</b> " + qObj.explanation;
}

/* --- ì˜¤ë‹µ ë…¸íŠ¸ ë¡œì§ --- */
let wrongList = [];

function updateWrongDisplay() {
  const p = document.getElementById('wrongList');
  if (wrongList.length === 0) {
    p.textContent = "ì•„ì§ í‹€ë¦° ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.";
  } else {
    p.textContent = "í‹€ë¦° ë¬¸ì œ ID: " + wrongList.join(", ");
  }
}

function retryWrongQuestion() {
  if (wrongList.length === 0) {
    alert("í‹€ë¦° ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.");
    return;
  }
  
  // ëœë¤ìœ¼ë¡œ í•˜ë‚˜ ë½‘ê¸°
  const randId = wrongList[Math.floor(Math.random() * wrongList.length)];
  const q = grammarQuestions.find(item => item.id === randId);

  document.getElementById('wrongQuizArea').style.display = 'block';
  document.getElementById('wrongQuestionInfo').textContent = `ì£¼ì œ: ${q.topic} (ID: ${q.id})`;
  document.getElementById('wrongQuestionEn').textContent = "Q. " + q.en;
  document.getElementById('wrongQuestionKo').textContent = q.ko;

  const wOptDiv = document.getElementById('wrongOptions');
  wOptDiv.innerHTML = "";
  
  let opts = [...q.options];
  shuffleArray(opts);

  opts.forEach(opt => {
    const btn = document.createElement('button');
    btn.textContent = opt;
    btn.onclick = () => {
      // ì˜¤ë‹µ í™•ì¸ ë¡œì§ (ê°„ì†Œí™”)
      const wRes = document.getElementById('wrongResult');
      const wExp = document.getElementById('wrongExplanation');
      
      // ë²„íŠ¼ ì ê·¸ê¸°
      const wBtns = wOptDiv.querySelectorAll('button');
      wBtns.forEach(b => {
         b.disabled = true;
         if(b.textContent === q.answer) b.style.backgroundColor="#d4edda";
         else if(b.textContent === opt) b.style.backgroundColor="#f8d7da";
      });

      if (opt === q.answer) {
        wRes.textContent = "ì •ë‹µì…ë‹ˆë‹¤! (ì˜¤ë‹µ ëª©ë¡ì—ì„œ ì‚­ì œë¨)";
        wRes.style.color = "green";
        wrongList = wrongList.filter(id => id !== q.id);
        updateWrongDisplay();
        if(wrongList.length === 0) document.getElementById('wrongQuizArea').style.display='none';
      } else {
        wRes.textContent = "ë˜ í‹€ë ¸ë„¤ìš”. ì •ë‹µ: " + q.answer;
        wRes.style.color = "red";
      }
      wExp.innerHTML = "ğŸ’¡ <b>í•´ì„¤:</b> " + q.explanation;
    };
    wOptDiv.appendChild(btn);
  });

  document.getElementById('wrongResult').textContent = "";
  document.getElementById('wrongExplanation').textContent = "";
}

/* --- ë¶ˆê·œì¹™ ë™ì‚¬ í€´ì¦ˆ (ë‹¨ë‹µí˜•) --- */
let currentVerb = null;
function startVerbQuiz() {
  currentVerb = verbs[Math.floor(Math.random() * verbs.length)];
  const type = document.getElementById('verbQuizType').value;
  const qArea = document.getElementById('verbQuizArea');
  qArea.style.display = 'block';
  
  const qText = document.getElementById('verbQuizQuestion');
  document.getElementById('verbQuizAnswer').value = "";
  document.getElementById('verbQuizResult').textContent = "";
  
  if (type === 'past') qText.textContent = `${currentVerb.base} (${currentVerb.ko})ì˜ ê³¼ê±°í˜•ì€?`;
  else if (type === 'pp') qText.textContent = `${currentVerb.base} (${currentVerb.ko})ì˜ ê³¼ê±°ë¶„ì‚¬ëŠ”?`;
  else qText.textContent = `'${currentVerb.ko}'ì˜ ì˜ì–´ í˜„ì¬í˜•(ì›í˜•)ì€?`;
}

function checkVerbQuiz() {
  if (!currentVerb) return;
  const type = document.getElementById('verbQuizType').value;
  const userAns = document.getElementById('verbQuizAnswer').value.trim().toLowerCase();
  let correctAns = "";
  
  if (type === 'past') correctAns = currentVerb.past;
  else if (type === 'pp') correctAns = currentVerb.pp;
  else correctAns = currentVerb.base;
  
  // ë³µìˆ˜ ì •ë‹µ ì²˜ë¦¬ (slash)
  const answers = correctAns.split('/').map(s => s.trim());
  
  const resDiv = document.getElementById('verbQuizResult');
  if (answers.includes(userAns)) {
    resDiv.textContent = "ì •ë‹µì…ë‹ˆë‹¤! â­•";
    resDiv.style.color = "green";
  } else {
    resDiv.textContent = `ì˜¤ë‹µì…ë‹ˆë‹¤ âŒ. ì •ë‹µ: ${correctAns}`;
    resDiv.style.color = "red";
  }
}

/* ==========================================================================
   3. ì´ˆê¸°í™” (Counts & Table)
   ========================================================================== */
function updateCounts() {
  const topics = [
    "presentPerfect","modal","relative","relativeAdverb","comparison",
    "preposition","conjunction","conditionalPresent","conditionalPast",
    "conditionalPastPerfect","passive","causative","perception",
    "participle","pronoun","toinf","gerund"
  ];
  topics.forEach(t => {
    const cnt = grammarQuestions.filter(q => q.topic === t).length;
    const span = document.getElementById('count-' + t);
    if (span) span.textContent = `(${cnt})`;
  });
  
  const vSpan = document.getElementById('count-verbs');
  if (vSpan) vSpan.textContent = `(${verbs.length})`;
}

window.addEventListener('DOMContentLoaded', () => {
  // 1. ë¶ˆê·œì¹™ ë™ì‚¬ í…Œì´ë¸” ìƒì„±
  const tbody = document.getElementById('verbTableBody');
  verbs.forEach(v => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${v.base}</td><td>${v.past}</td><td>${v.pp}</td><td>${v.ko}</td>`;
    tbody.appendChild(tr);
  });

  // 2. ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
  updateCounts();
  
  // 3. ë…¸íŠ¸ ë¡œë“œ (ê° ì„¹ì…˜ë³„)
  const noteIds = [
    "presentPerfect","modal","relative","relativeAdverb","comparison",
    "preposition","conjunction","conditionalPresent","conditionalPast",
    "conditionalPastPerfect","passive","causative","perception",
    "participle","pronoun","toinf","gerund"
  ];
  noteIds.forEach(id => loadNote(id));
});
</script>
</body>
</html>
